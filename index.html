<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8"/>
 <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
  <title>НРК — оцінювання (2026 | порівняння + висновок)</title>
  <link rel="stylesheet" href="styles.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

</head>
<body>

<header>
  <div class="wrap">
    <h1>Безекіпажні наземні комплекси</h1>
    <!-- <p class="sub">Обери модель → заповни бали + коментарі → сформуй висновок → порівняй → експорт.</p> -->
<div class="tabs" role="tablist">
  <button class="tab active" data-tab="t1" type="button">
    <i class="fa-solid fa-book"></i><span class="tabLabel">Довідник</span>
  </button>
  <button class="tab" data-tab="t2" type="button">
    <i class="fa-solid fa-clipboard-check"></i><span class="tabLabel">Оцінка</span>
  </button>
  <button class="tab" data-tab="t6" type="button">
    <i class="fa-solid fa-layer-group"></i><span class="tabLabel">Класифікація</span>
  </button>
  <button class="tab" data-tab="t7" type="button">
    <i class="fa-solid fa-warehouse"></i><span class="tabLabel">Прикз</span>
  </button>
  <button class="tab" data-tab="t5" type="button">
    <i class="fa-solid fa-scale-balanced"></i><span class="tabLabel">Порівняння</span>
  </button>

  <!-- ✅ ТЕМА — НЕ .tab -->
  <button class="tabTheme" type="button" id="themeToggle" title="Перемкнути тему">
    <i class="fa-solid fa-moon"></i>
    <span class="themeLabel">Темна</span>
  </button>
</div>

    
  </div>
</header>

<main class="wrap">

  <!-- TAB 1 Довідник -->
  <section id="t1" class="grid cols2">

    <div class="card">
      <div class="stickyBox">
        <!-- <h2>Довідник моделей (автозаповнення)</h2> -->

        <div class="t1Compact">
        <div class="row presetControls">
  <div style="flex:2; min-width:280px">
    <label>Пошук (виробник або назва)</label>

    <div class="autocomplete">
  <input id="presetSearch" placeholder="Пошук: виробник або назва НРК">
  <input type="hidden" id="selectedPresetKey">
  <div id="presetSuggestions" class="hide"></div>
</div>


    <!-- <div class="small" style="margin-top:3px">
      Пиши 2–3 символи — з’являться варіанти. Стрілки ↑↓ + Enter теж працюють.
    </div> -->
  </div>

  <div class="btnCol">
    <label>&nbsp;</label>
    <button class="primary" type="button" id="applyPresetBtn" disabled>Заповнити</button>
  </div>
</div>


        <!-- KPI замість ID -->
        <div class="kpiTop" id="kpiTop"></div>
        <p class="small kpiExplain">
          <b>Пояснення KPI:</b>
          <br>• <b>грн/кг</b> — скільки коштує 1 кг корисного навантаження (чим менше — тим краще).
          <br>• <b>грн/(кг·км)</b> — ціна за “перевезення” (навантаження × запас ходу).
        </p>
        </div>

        <div class="divider"></div>

        <div class="photoBox">
          <div class="photoFrame">
            <img id="nrkPhoto" alt="Фото НРК" />
            <div class="noPhoto" id="noPhoto">Фото</div>
          </div>
          <div class="photoMeta">
  <div class="pill">Модель: <strong id="photoModel">—</strong></div>
  <div class="pill">Виробник: <strong id="photoMaker">—</strong></div>

  <div class="pill">Контакт: <strong id="photoContact">—</strong></div>

  <div class="pill" style="gap:10px; flex-wrap:wrap">
   Телефон:
    <strong>
      <a id="contactLink" href="javascript:void(0)" style="color:inherit; text-decoration:none;">—</a>

    </strong>
   <button id="copyContactBtn" class="iconBtn" type="button" title="Скопіювати номер">
 
</button>

  </div>
</div>

        </div>
      </div>

      <div class="divider"></div>

      <h2>Основні характеристики</h2>

      <!-- Компактно: 2 колонки на десктопі -->
      <div class="formGrid">
  <div>
    <label>Виробник</label>
    <input id="maker"/>
  </div>

  <div>
    <label>Назва БеНК</label>
    <input id="model"/>
  </div>

  <div>
    <label>Орієнтовна ціна, грн</label>
    <input id="price" type="number" min="0"/>
  </div>

  <div>
    <label>Силова установка</label>
    <input id="power"/>
  </div>

  <div>
    <label>Маса, кг</label>
    <input id="mass" type="number" min="0"/>
  </div>

  <div>
    <label>Розміри, мм (ДхШхВ)</label>
    <input id="dims" placeholder="2155x1509x904"/>
  </div>

  <div>
    <label>Корисне навантаження, кг</label>
    <input id="payloadNom" type="number" min="0"/>
  </div>

  <div>
    <label>Макс швид., км/год</label>
    <input id="maxSpeed" type="number" min="0"/>
  </div>

  <div>
    <label>Запас ходу, км</label>
    <input id="rangeRoad" type="number" min="0"/>
  </div>

  <div>
    <label>Кліренс, мм</label>
    <input id="clearance" type="number" min="0"/>
  </div>

  <div>
    <label>Кут підйому, °</label>
    <input id="climb" type="number" min="0"/>
  </div>

  <div>
    <label>Кут крену, °</label>
    <input id="tilt" type="number" min="0"/>
  </div>

  <div>
    <label>Оптична</label>
    <select id="optical"><option value="-">-</option><option value="+">+</option></select>
  </div>

  <div>
    <label>Оптична з ІЧ</label>
    <select id="opticalIR"><option value="-">-</option><option value="+">+</option></select>
  </div>

  <div>
    <label>Тепловізійна</label>
    <select id="thermal"><option value="-">-</option><option value="+">+</option></select>
  </div>

  <div>
    <label>Радіо, км</label>
    <input id="radioKm" type="number" step="0.1" min="0"/>
  </div>

  <div>
    <label>Starlink</label>
    <select id="starlink"><option value="-">-</option><option value="+">+</option></select>
  </div>

  <div>
    <label>LTE</label>
    <select id="lte"><option value="-">-</option><option value="+">+</option></select>
  </div>
</div>


      <label>Примітки</label>
      <textarea id="notes" placeholder="Комплектація, обмеження, нюанси, що впливає на ціну..."></textarea>

      <!-- <div class="btnrow">
        <button class="primary" id="saveBtn">Зберегти</button>
        <button class="ghost" id="loadBtn">Завантажити</button>
        <button class="danger" id="clearBtn">Очистити форму</button>
      </div> -->

      <!-- <p class="small">
        <b>Як працює “Зберегти/Завантажити”:</b> дані зберігаються локально в браузері (localStorage).  
        Для завантаження просто введи <b>Назву</b> (модель) і натисни “Завантажити” — система знайде останній запис.
      </p> -->
    </div>

    <div class="card">
      <h2>Швидкі KPI (повтор)</h2>
      <div class="kpi" id="kpi"></div>
      <!-- <p class="small">Те саме, що зверху. Залишив тут як дубль для зручності.</p> -->
    </div>
  </section>

  <!-- TAB 2 Оцінка -->
<section id="t2" class="grid cols2 hide">

  <!-- ЛІВА КОЛОНКА: критерії + кнопки -->
  <div class="card">
    <h2>Критерії 0–5 + коментарі</h2>
    <p class="small">
      Постав бали та додай зауваження. Натисни “Довідка” біля критерію — там опис як ставити 0/3/5 і що питати.
    </p>

    <div id="criteriaList"></div>

    <!-- ✅ Одне місце для помилок -->
    <div id="validationBox" class="small err" style="margin-top:10px"></div>

    <div class="btnrow">
      <button class="ghost" id="howCalcBtn" type="button" title="Пояснення розрахунку">
        <i class="fa-solid fa-circle-info"></i> Як рахується?
      </button>

      <!-- <button class="ghost" id="downloadReportHtmlBtn" type="button" title="Скачати звіт HTML">
        <i class="fa-solid fa-file-lines"></i> Звіт (HTML)
      </button> -->

      <button class="ghost" id="downloadReportTxtBtn" type="button" title="Скачати звіт TXT">
        <i class="fa-solid fa-file-arrow-down"></i> Звіт (TXT)
      </button>
    </div>

    <!-- ✅ INLINE: Як рахується (акордеон, згортається) -->
    <div id="howCalcInline" class="howcalc hide"></div>
  </div>

  <!-- ПРАВА КОЛОНКА: результат онлайн -->
  <div class="card">
    <h2>Результат</h2>

    <div class="row"><b>Бал</b><span id="finalScore">—</span></div>
    <div class="row"><b>Рішення</b><span id="finalDecision">—</span></div>

    <div class="row" style="align-items:center;gap:10px">
      <b>Світлофор</b>
      <span id="riskBadge" class="badge"><span id="riskText">—</span></span>
    </div>

    <div class="row"><b>Мін. ключовий</b><span id="minKey">—</span></div>

    <div class="divider"></div>

    <h2>Загальні зауваження комісії</h2>
    <textarea id="commissionNotes" placeholder="Загальні коментарі по моделі..."></textarea>

    <p class="small" style="margin-top:10px">
      Онлайн результат з’явиться, коли всі оцінки заповнені цифрами 0–5.
    </p>
  </div>

</section>



  <!-- TAB 3 Чек-лист -->
  <section id="t3" class="grid hide">
    <div class="card">
      <h2>Чек-лист демонстрації (✔/✖)</h2>
      <p class="small">Розширений список під 1–2 лінію (зв’язок/Fail-safe/РЕБ/навантаження/ходова/електрика/сервіс).</p>
      <div id="checklist"></div>
      <div class="btnrow">
        <button class="primary" id="saveChkBtn">Зберегти чек-лист</button>
        <button class="ghost" id="resetChkBtn">Скинути позначки</button>
      </div>
    </div>
  </section>

  <!-- TAB 4 Експорт -->
  <section id="t4" class="grid hide">
    <div class="card">
      <h2>Експорт</h2>
      <p class="small">Експорт усіх збережених оцінок в Excel (.xls).</p>
      <div class="btnrow">
        <button class="primary" id="exportExcelBtn">Експорт в Excel</button>
        <button class="danger" id="wipeAllBtn">Видалити всі дані</button>
      </div>
    </div>
  </section>

  <!-- TAB 5 Порівняння -->
  <section id="t5" class="grid hide">
    <div class="card">
      <h2>Порівняння моделей</h2>
      <p class="small">Оберіть моделі з довідника (до 4, утримуючи Ctrl)</p>
      <select id="compareSelect" multiple size="10"></select>
      <div class="btnrow">
        <button class="primary" id="buildCompareBtn">Порівняти</button>
        <button class="ghost" id="clearCompareBtn">Очистити</button>
      </div>
      <div id="compareTable" style="margin-top:20px; overflow-x:auto"></div>
    </div>
  </section>
  <!-- TAB 6 Класифікація -->
<section id="t6" class="grid hide">
  <div class="card">
    <h2>Класифікація безекіпажних наземних комплексів (БеНК)</h2>
    <p class="small">
      Узагальнена таблиця характеристик і умовних позначень для швидкої ідентифікації класу БеНК.
    </p>

    <div class="section">
      <div class="sectionTitle">1) Основні характеристики</div>
      <div class="t6TableWrap">
        <table class="t6Table">
          <tr>
            <th style="width:56px">№</th>
            <th>Назва характеристики</th>
            <th>Види</th>
          </tr>
          <tr>
            <td>1</td>
            <td>За основним функціональним призначенням</td>
            <td>
              <div class="vlist">
                <div>Бойовий</div>
                <div>*Бойовий (стаціонарний)</div>
                <div>Логістичний</div>
                <div>Інженерний</div>
                <div>Спеціальний</div>
                <div>*Спеціальний (стаціонарний)</div>
                <div>Тренажери (навчальні)</div>
              </div>
            </td>
          </tr>
          <tr>
            <td>2</td>
            <td>За спорядженою масою**</td>
            <td>
              <div class="vlist">
                <div>Міні – до 5 кг</div>
                <div>Легкі – 5–50 кг</div>
                <div>Середні – 50–500 кг</div>
                <div>Важкі – 500–5000 кг</div>
                <div>Надважкі – понад 5000 кг</div>
              </div>
            </td>
          </tr>
          <tr>
            <td>3</td>
            <td>За типом шасі</td>
            <td>
              <div class="vlist">
                <div>Колісне</div>
                <div>Гусеничне</div>
                <div>Спеціальне</div>
              </div>
            </td>
          </tr>
          <tr>
            <td>4</td>
            <td>За силовою установкою</td>
            <td>
              <div class="vlist">
                <div>Електрична</div>
                <div>ДВЗ</div>
                <div>Комбінована</div>
              </div>
            </td>
          </tr>
        </table>
      </div>
    </div>

    <div class="noteBox">
      <div><strong>*</strong> Зазначений вид класифікується виключно за масою.</div>
      <div><strong>**</strong> Під спорядженою масою розуміється маса зразка БеНК, приведеного у готовність до використання за призначенням, без урахування боєкомплекту (для бойових зразків) або без корисного навантаження (для логістичних зразків).</div>
    </div>

    <div class="divider"></div>

    <div class="section">
      <div class="sectionTitle">2) Умовні позначення</div>
      <div class="legendGrid">
        <div class="legendItem"><span class="legendKey">Б</span> бойове призначення</div>
        <div class="legendItem"><span class="legendKey">Л</span> логістичне призначення</div>
        <div class="legendItem"><span class="legendKey">І</span> інженерне призначення</div>
        <div class="legendItem"><span class="legendKey">С</span> спеціальне призначення</div>
        <div class="legendItem"><span class="legendKey">Ст</span> стаціонарний комплекс</div>
        <div class="legendItem"><span class="legendKey">Т</span> навчальний (тренажер)</div>
        <div class="legendItem"><span class="legendKey">К</span> колісне шасі</div>
        <div class="legendItem"><span class="legendKey">Г</span> гусеничне шасі</div>
        <div class="legendItem"><span class="legendKey">Сп</span> спеціальне шасі</div>
        <div class="legendItem"><span class="legendKey">Е</span> електрична силова установка</div>
        <div class="legendItem"><span class="legendKey">Д</span> двигун внутрішнього згоряння</div>
        <div class="legendItem"><span class="legendKey">Кб</span> комбінована силова установка</div>
      </div>
    </div>

    <div class="exampleBox">
      <div class="sectionTitle">Приклад</div>
      <div class="small">
        БеНК БМКЕ – безекіпажний наземний комплекс бойового призначення, за масою – міні,
        за типом шасі – колісний, за силовою установкою – електричний.
      </div>
    </div>

    <div class="divider"></div>

    <div class="section">
      <div class="sectionTitle">3) Наявні БеНК (з пресетів)</div>
      <div class="small" style="margin-bottom:8px">
        Сформовано автоматично з довідника моделей. Класи маси й тип шасі визначаються за характеристиками.
      </div>
      <div class="row t6Controls">
        <div style="flex:1; min-width:200px">
          <label>Фільтр за призначенням</label>
          <select id="t6FuncFilter"></select>
        </div>
        <div style="flex:1; min-width:220px">
          <label>Пошук (модель або виробник)</label>
          <input id="t6Search" placeholder="Напр. D-21, ГУЛІВЕР, RATEL..." />
        </div>
        <div style="flex:0 0 220px; min-width:200px">
          <label>Сортування</label>
          <select id="t6Sort">
            <option value="model_asc">За назвою (А→Я)</option>
            <option value="price_asc">За ціною (зростання)</option>
            <option value="price_desc">За ціною (спадання)</option>
            <option value="mass_asc">За масою (зростання)</option>
            <option value="mass_desc">За масою (спадання)</option>
            <option value="chassis_asc">За типом шасі</option>
          </select>
        </div>
      </div>
      <div id="t6Catalog" class="classTableWrap"></div>
    </div>

    <div class="section">
      <div class="sectionTitle">4) Аналітика з пресетів</div>
      <div id="t6Top5" class="t6Insights"></div>
      <div class="divider"></div>
      <div id="t6Value" class="t6Insights"></div>
    </div>
  </div>
</section>
<!-- TAB 7 Прикз (наявність по загонам) -->
<!-- TAB 7 Прикз (наявність по загонам) -->
<section id="t7" class="grid hide">  <!-- ← як у t2, без cols2 (одна колонка) -->
  <div class="card">  <!-- ← як у всіх інших: один card для всього контенту -->
    <h2>Наявність БеНК по загонам</h2>
    <p class="small">
      Тут фіксується кількість БеНК у підрозділах (загонах). Дані локальні для цього файлу (пізніше можна підв’язати до Google Sheet).
    </p>

    <!-- Sticky-блок тепер лежить як частина card, з обмеженням від .wrap -->
    <div id="invStickyBar" class="invStickyBar">
      <div class="row" style="gap:10px; flex-wrap:wrap; align-items:flex-end">
        <div style="flex:1; min-width:220px">
          <label>Фільтр (група/клас)</label>
          <select id="invGroupFilter"></select>
        </div>

        <div style="flex:1; min-width:220px">
          <label>Пошук БеНК</label>
          <input id="invSearch" placeholder="Напр. D-21, ГУЛІВЕР, RATEL..." />
        </div>

        <div class="btnrow" style="margin:0">
          <button class="ghost" id="invResetBtn" type="button">
            <i class="fa-solid fa-rotate-left"></i> Скинути
          </button>
        </div>
      </div>

      <div class="divider"></div>
    </div>

    <div id="inventoryTable" style="overflow-x:auto"></div>

    <div class="divider"></div>

    <h2>Підсумки</h2>
    <div id="inventorySummary" style="overflow-x:auto"></div>
  </div>
</section>

</main>

<!-- Модалка висновку -->
<div class="modalOverlay" id="conclusionModal">
  <div class="modal">
    <h3>Висновок за результатами оцінки</h3>
    <div class="meta" id="conclusionMeta"></div>
    <div class="box" id="conclusionText"></div>
    <div class="modalCloseRow">
      <button class="primary" id="copyConclusion">Копіювати в буфер</button>
      <button class="ghost" id="closeConclusion">Закрити</button>
    </div>
  </div>
</div>

<!-- Модалка довідки -->
<div class="modalOverlay" id="modalOverlay">
  <div class="modal">
    <h3 id="modalTitle">Довідка</h3>
    <div class="meta" id="modalMeta"></div>
    <div class="box" id="modalScale"></div>
    <div class="box" id="modalHow"></div>
    <div class="box" id="modalQuestions"></div>
    <div class="modalCloseRow">
      <button class="ghost" id="modalCloseBtn">Закрити</button>
    </div>
  </div>
</div>

<!-- Модалка БеНК з пресетів -->
<div class="modalOverlay" id="presetModal">
  <div class="modal">
    <h3 id="presetModalTitle">БеНК</h3>
    <div class="meta" id="presetModalMeta"></div>
    <div id="presetModalBody"></div>
    <div class="modalCloseRow">
      <button class="ghost" id="presetModalCloseBtn">Закрити</button>
    </div>
  </div>
</div>

<script src="script.js"></script>
</body>
</html>
